<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>使用代理机制完成ajax跨域访问</title>
</head>
<body>
<script type="text/javascript">
	// ES6中有一个新语法：箭头函数
	window.onload=()=>{
		document.getElementById("btn").onclick=()=>{
			//发送ajax请求了
			// 1.创建核心对象
			var xhr = new XMLHttpRequest();//const可以声明变量。
			// 2.注册回调函数
			xhr.onreadystatechange=()=>{
				if (xhr.readyState == 4) {
					//这里也可以使用区间的方式：因为状态码是200-299都是正常响应结束。
					if (xhr.status >= 200 && xhr.status < 300) {
						document.getElementById("mydiv").innerHTML=xhr.responseText
					}
				}
			}
			// 3.开启通道
			xhr.open("GET","/a/proxy",true)
			// 4.发送请求
			xhr.send()
		}
	}
</script>
<button id="btn">使用代理机制解决ajax跨域访问</button>
<div id="mydiv"></div>
</body>
</html>